<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://cdn.bootcss.com/gojs/1.7.12/go-debug.js"></script>


</head>

<body>


  <div id="sample">
    <div id="myDiagramDiv" style="border: solid 1px black; width:100%; height:400px;"></div>
  </div>

  <div id="savedModel" style="border: solid 1px black; width:100%; height:400px;"></div>
  <script>
  
      var $ = go.GraphObject.make;

      myDiagram =
        $(go.Diagram, "myDiagramDiv",  // create a Diagram for the DIV HTML element
          {
            initialContentAlignment: go.Spot.Center,     // 默认居中
            layout: $(go.TreeLayout,
              {
                angle: 90,
                setsPortSpot: false,
                setsChildPortSpot: false
              }),
            "undoManager.isEnabled": true,              // 开启默认键盘操作    

           
          });

      myDiagram.nodeTemplate =
        $("Node", "Auto",
          $("Shape", "CreateRequest",
            { fill: "white" },
            new go.Binding("fill", "color")),
          $("TextBlock",
            { margin: 4 },
            new go.Binding("text", "key"))
        );

      myDiagram.linkTemplate =
        $("Link",
          $("Shape",
            { strokeWidth: 1.5 }),
          $("Shape",
            { toArrow: "Standard", stroke: null })
        );

      myDiagram.nodeTemplateMap.add("Comment",
        $(go.Node,  // this needs to act as a rectangular shape for BalloonLink,
          { background: "rgba(0,0,0,0.5)" },  // Comment 的背景色(可透明)
          $(go.TextBlock,
            { stroke: "red", margin: 3 },    // Comment 的字体颜色(可透明)
            new go.Binding("text"))
        ));

      myDiagram.linkTemplateMap.add("Comment",
        // 如果 BalloonLink.js 被加载了可以使用该函数
        $((typeof BalloonLink === "function" ? BalloonLink : go.Link),
          $(go.Shape,  // the Shape.geometry will be computed to surround the comment node and 
            // point all the way to the commented node
            // Comment 默认围绕节点 
            { stroke: "brown", strokeWidth: 1, fill: "lightyellow" }) // 外边框颜色、粗细、填充色
        ));

      myDiagram.model =
        $(go.GraphLinksModel,
          {
            nodeDataArray: [
              { key: "Alpha", color: "orange" },
              { key: "Beta", color: "lightgreen" },
              { key: "Gamma", color: "lightgreen" },
              { key: "Delta", color: "pink" },
              { key: "A comment", text: "comment\nabout Alpha", category: "Comment" },
              { key: "B comment", text: "comment\nabout Beta", category: "Comment" },
              { key: "G comment", text: "comment about Gamma", category: "Comment" }
            ],
            linkDataArray: [
              { from: "Alpha", to: "Beta" },
              { from: "Alpha", to: "Gamma" },
              { from: "Alpha", to: "Delta" },
              { from: "A comment", to: "Alpha", category: "Comment" },
              { from: "B comment", to: "Beta", category: "Comment" },
              { from: "G comment", to: "Gamma", category: "Comment" }
            ]
          });

      // show the model in JSON format
      //document.getElementById("savedModel").textContent = myDiagram.model.toJson();
    
  </script>
</body>

</html>